{
  "name": "TriageNinja Auto-Triage with Rovo Agent",
  "description": "Automatically classify and assign new tickets using Rovo Agent AI",
  "state": "ENABLED",
  "ruleScope": {
    "resources": ["ari:cloud:jira::project/YOUR_PROJECT_ID"]
  },
  "trigger": {
    "component": "TRIGGER",
    "type": "jira.issue.event.trigger:created",
    "value": {
      "eventKey": "jira:issue_created"
    },
    "children": [],
    "conditions": []
  },
  "components": [
    {
      "component": "CONDITION",
      "type": "jira.issue.condition",
      "value": {
        "selectedField": {
          "type": "ID",
          "value": "assignee"
        },
        "selectedFieldType": "assignee",
        "comparison": "EQUALS",
        "compareValue": {
          "type": "ID",
          "value": "EMPTY"
        }
      },
      "children": [
        {
          "component": "ACTION",
          "type": "rovo.agent.invoke",
          "value": {
            "agentKey": "triageninja-agent",
            "actionKey": "analyze-ticket-classification",
            "inputs": {
              "issueKey": "{{issue.key}}"
            }
          },
          "children": [],
          "conditions": []
        },
        {
          "component": "ACTION",
          "type": "rovo.agent.invoke",
          "value": {
            "agentKey": "triageninja-agent",
            "actionKey": "suggest-ticket-assignee",
            "inputs": {
              "issueKey": "{{issue.key}}",
              "category": "{{rovoAgent.category}}"
            }
          },
          "children": [],
          "conditions": []
        },
        {
          "component": "ACTION",
          "type": "jira.issue.edit",
          "value": {
            "operations": [
              {
                "fieldId": "priority",
                "fieldType": "priority",
                "type": "SET",
                "value": "{{rovoAgent.priority}}"
              },
              {
                "fieldId": "assignee",
                "fieldType": "assignee",
                "type": "SET",
                "value": "{{rovoAgent.assigneeId}}"
              },
              {
                "fieldId": "labels",
                "fieldType": "labels",
                "type": "ADD",
                "value": "{{rovoAgent.category}}"
              }
            ]
          },
          "children": [],
          "conditions": []
        },
        {
          "component": "ACTION",
          "type": "jira.issue.create.comment",
          "value": {
            "comment": "ðŸ¤– **AI Triage Complete (Rovo Agent)**\\n\\n- **Category**: {{rovoAgent.category}} / {{rovoAgent.subCategory}}\\n- **Priority**: {{rovoAgent.priority}}\\n- **Assignee**: {{rovoAgent.assignee}}\\n- **Confidence**: {{rovoAgent.confidence}}%\\n- **Reasoning**: {{rovoAgent.reasoning}}"
          },
          "children": [],
          "conditions": []
        }
      ],
      "conditions": []
    }
  ]
}
