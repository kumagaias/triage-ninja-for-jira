# TriageNinja for Jira - 要件定義書

## プロジェクト概要

### アプリ名
**TriageNinja for Jira**

### タグライン
- "AI-Powered Intelligent Ticket Triage"
- "Master the art of AI triage"

### 対象製品
- **メイン**: Jira Service Management
- **サブ**: Jira Software

### ターゲットユーザー
- IT部門（情シス）
- ヘルプデスクチーム
- サポートエンジニア
- IT管理者

### プロジェクト目的
手動でのチケットトリアージ作業を自動化し、AIによる高精度な分類・担当者アサイン・類似チケット検索により、サポートチームの生産性を80%向上させる。

## ビジネス要件

### 解決する課題
1. **手動トリアージの時間コスト**
   - 1チケットあたり5-10分かかる
   - 大量のチケットで担当者が疲弊

2. **担当者アサインのミスマッチ**
   - スキルに合わない担当者へのアサイン
   - 解決時間の長期化

3. **負荷の不均等**
   - 特定の担当者に集中
   - チーム全体の効率低下

4. **過去の知見が活用されない**
   - 類似チケットの解決策が見つからない
   - 同じ問題を何度も調査

### 期待される効果
- **時間削減**: 5-10分 → 10秒（80%削減）
- **精度向上**: AI分析精度95%以上
- **負荷分散**: 担当者のワークロードを考慮した最適アサイン
- **知見活用**: 過去の解決策を即座に参照

## 機能要件

### 1. 自動チケット分類機能

**概要**: 新規チケットをAIが自動分類

**詳細要件**:
- チケットの概要（Summary）と説明（Description）を分析
- カテゴリーを自動判定
  - 例: ネットワーク、ハードウェア、ソフトウェア、アカウント管理
- サブカテゴリーも提案
  - 例: ネットワーク > VPN、ハードウェア > プリンター
- 優先度の自動判定（High/Medium/Low）
- 緊急度の評価（Urgent/Normal）
- 関連タグの自動付与

**入力**:
- チケットID
- 概要（Summary）
- 説明（Description）
- 報告者情報
- 作成日時

**出力**:
- カテゴリー名
- サブカテゴリー名
- 優先度
- 緊急度
- 信頼度スコア（0-100）
- 判定理由
- 推奨タグ

**API**:
- Jira REST API v3: `/rest/api/3/issue/{issueIdOrKey}`
- Rovo Agent: チケット内容の分析

**UI**:
- チケット詳細画面に「AI Triage」ボタン
- 分析結果をモーダルまたはサイドパネルで表示
- ローディングアニメーション
- 結果の承認/却下ボタン

**受け入れ基準**:
- [ ] AIが90%以上の精度でカテゴリーを判定
- [ ] 分析時間が3秒以内
- [ ] 信頼度スコアが表示される
- [ ] 判定理由が明確に説明される

### 2. 最適な担当者アサイン機能

**概要**: AIが最適な担当者を提案

**詳細要件**:
- 過去の解決実績を分析
- スキルマッチング（カテゴリーごとの得意分野）
- 現在のワークロード考慮
- 解決率・平均解決時間を基に最適化
- アサイン理由を説明（例: "VPN専門家、解決率95%"）

**データソース**:
- 過去のチケット履歴
- 担当者ごとの解決時間
- カテゴリーごとの成功率
- 現在の担当チケット数

**API**:
- Jira REST API: `/rest/api/3/user/assignable/search`
- Rovo Agent: 担当者マッチング分析

**UI**:
- 推奨担当者を表示（名前、理由、スコア）
- 上位3名を表示
- ワンクリックでアサイン
- 現在の負荷状況を可視化

**受け入れ基準**:
- [ ] 担当者の過去実績が正確に分析される
- [ ] ワークロードが考慮される
- [ ] アサイン理由が明確
- [ ] ワンクリックでアサイン完了

### 3. 類似チケット検索機能

**概要**: 過去の類似チケットと解決策を表示

**詳細要件**:
- テキスト類似度分析
- 同じカテゴリーの過去チケットを検索
- 解決済みチケットの解決方法を表示
- 平均解決時間も表示
- 類似度スコアを表示

**API**:
- Jira REST API: `/rest/api/3/search` (JQL)
- Rovo Agent: 意味的類似度分析

**UI**:
- 類似チケットリスト（最大3〜5件）
- チケットIDクリックで詳細表示
- 解決方法のハイライト
- 類似度スコアの表示

**受け入れ基準**:
- [ ] 類似度80%以上のチケットが表示される
- [ ] 解決済みチケットのみが表示される
- [ ] 解決方法が明確に表示される
- [ ] チケット詳細へのリンクが機能する

### 4. AI信頼度スコア機能

**概要**: AI分析の信頼度を表示

**詳細要件**:
- 分類の確実性をパーセンテージで表示
- 低信頼度（<70%）の場合は警告
- 信頼度に応じてUIの色を変更
- 信頼度の計算根拠を表示

**表示**:
- プログレスバー
- 色分け（緑: 90%+、黄: 70-89%、赤: <70%）
- 信頼度に基づく推奨アクション

**受け入れ基準**:
- [ ] 信頼度スコアが0-100で表示される
- [ ] 色分けが正しく機能する
- [ ] 低信頼度時に警告が表示される
- [ ] 計算根拠が説明される

### 5. ダッシュボード機能

**概要**: トリアージ状況の可視化

**詳細要件**:
- 統計カード
  - 未トリアージチケット数
  - 本日の自動トリアージ数
  - 時間削減率
  - AI平均精度
- 未処理チケット一覧
- フィルタリング機能（優先度、カテゴリー）
- リアルタイム更新

**API**:
- Jira REST API: `/rest/api/3/search`
- カスタムフィールドで「トリアージ状態」を管理

**UI**:
- Jira Project Pageモジュール
- カード型レイアウト
- レスポンシブデザイン
- クイックアクションボタン

**受け入れ基準**:
- [ ] 統計カードが正確に表示される
- [ ] チケット一覧が表示される
- [ ] フィルタリングが機能する
- [ ] リアルタイム更新が動作する

## 非機能要件

### パフォーマンス
- AI分析レスポンス時間: 3秒以内
- ダッシュボード読み込み: 2秒以内
- 類似チケット検索: 2秒以内

### セキュリティ
- Forge Storage使用（Runs on Atlassian準拠）
- ユーザーデータは暗号化
- APIキーは環境変数で管理
- 必要最小限の権限のみ要求

### スケーラビリティ
- 1,000チケット/日まで対応
- 100ユーザーまで同時利用可能
- Forge Storageの容量制限内で動作

### 可用性
- 99%以上の稼働率
- エラー時の適切なフォールバック
- ローディング状態の明確な表示

### ユーザビリティ
- 直感的なUI
- 3クリック以内で主要機能にアクセス
- レスポンシブデザイン
- アクセシビリティ対応

## 技術要件

### プラットフォーム
- Atlassian Forge (Serverless)
- Forge UI Kit 2 (React)
- Node.js 20.x

### API & 統合
- Jira REST API v3
  - Issue API
  - Search API
  - User API
- Atlassian Rovo Agent
  - AI分析エンジン
- Forge Storage API
  - データ永続化

### フロントエンド
- React (Forge UI Kit)
- Tailwind CSS (Utility classes)
- Lucide React (Icons)

### バックエンド
- Forge Functions (Node.js)
- Resolver Functions (API呼び出し)

### 必要な権限（Scopes）
```yaml
permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - read:jira-user
  external:
    fetch:
      backend:
        - 'api.atlassian.com'
```

## データ要件

### Forge Storage

#### triageHistory
```json
{
  "ticketId": "HELP-1234",
  "triageDate": "2025-12-10T10:30:00Z",
  "category": "Network",
  "subCategory": "VPN",
  "priority": "High",
  "assignedTo": "Alex Chen",
  "confidence": 94,
  "aiVersion": "1.0"
}
```

#### agentPerformance
```json
{
  "agentName": "Alex Chen",
  "categories": {
    "Network": {
      "totalTickets": 150,
      "resolved": 143,
      "avgResolutionTime": "25min",
      "successRate": 0.95
    }
  },
  "lastUpdated": "2025-12-10T10:30:00Z"
}
```

## 制約事項

### 技術的制約
- Forge platformの制限内で動作
- Rovo Agentのレート制限を考慮
- Forge Storageの容量制限（10MB/app）

### ビジネス的制約
- MVP開発期間: 2週間
- 予算: ハッカソン範囲内
- リソース: 1名の開発者

### 外部依存
- Atlassian Forge platform
- Rovo Agent API
- Jira REST API

## 成功指標

### 技術的成功
- [ ] Forge appとして動作
- [ ] Rovo Agent統合完了
- [ ] AI分析が正確（>90%）
- [ ] レスポンス時間<3秒

### ハッカソン成功
- [ ] デモビデオ完成
- [ ] 期限内提出
- [ ] ボーナス賞要件満たす
- [ ] 審査員に価値が伝わる

### ビジネス成功（将来）
- [ ] 実際のユーザーが使いたいと思う
- [ ] Marketplaceで公開可能
- [ ] スケーラブル

## リスクと対策

### リスク1: Rovo Agent APIの制限
- **影響**: AI機能が制限される
- **対策**: レート制限を考慮した実装、キャッシング

### リスク2: 開発期間の不足
- **影響**: 機能が完成しない
- **対策**: MVPスコープの厳密な管理、優先順位付け

### リスク3: AI精度の不足
- **影響**: ユーザー体験の低下
- **対策**: プロンプトエンジニアリング、フィードバックループ

## 更新履歴

| 日付 | バージョン | 変更内容 | 担当者 |
|------|-----------|---------|--------|
| 2025-12-11 | 1.0 | 初版作成 | - |
